<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prova de Vinhos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            color: white;
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 100px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><linearGradient id="wine" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="%23722F37"/><stop offset="100%" stop-color="%23C21807"/></linearGradient></defs><path d="M30 20 L70 20 L75 80 L25 80 Z" fill="url(%23wine)" stroke="%23333" stroke-width="2"/><ellipse cx="50" cy="35" rx="15" ry="8" fill="%23722F37" opacity="0.7"/></svg>') no-repeat center;
            background-size: contain;
            z-index: 1;
        }

        .header h1 {
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            padding-top: 60px;
        }

        .header p {
            font-size: clamp(0.9rem, 3vw, 1.1rem);
        }

        .wine-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .wine-image-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .wine-image {
            width: 100%;
            height: 200px;
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            margin-bottom: 10px;
            position: relative;
        }

        .wine-elegant {
            background: linear-gradient(45deg, rgba(114, 47, 55, 0.9), rgba(194, 24, 7, 0.8)), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"><defs><pattern id="wine-pattern" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="3" fill="%23fff" opacity="0.1"/></pattern></defs><rect width="400" height="300" fill="%23722F37"/><rect width="400" height="300" fill="url(%23wine-pattern)"/><path d="M50 100 Q200 80 350 100 Q200 120 50 100" fill="%23C21807" opacity="0.7"/><circle cx="100" cy="150" r="40" fill="%23722F37" opacity="0.8"/><circle cx="300" cy="180" r="35" fill="%238B0000" opacity="0.6"/></svg>');
        }

        .povoa-image {
            background: linear-gradient(45deg, rgba(0, 51, 102, 0.8), rgba(0, 123, 191, 0.7)), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300"><rect width="400" height="300" fill="%23003366"/><path d="M0 200 Q100 180 200 200 Q300 220 400 200 L400 300 L0 300 Z" fill="%23007BBF"/><path d="M0 220 Q100 200 200 220 Q300 240 400 220 L400 300 L0 300 Z" fill="%23005A8B"/><circle cx="80" cy="100" r="30" fill="%23FFD700" opacity="0.8"/><rect x="150" y="120" width="100" height="60" fill="%23fff" opacity="0.9"/><rect x="160" y="130" width="20" height="40" fill="%23003366"/><rect x="220" y="130" width="20" height="40" fill="%23003366"/></svg>');
        }

        .wine-image-card h3 {
            color: #722F37;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .wine-image-card p {
            color: #666;
            font-size: 0.9rem;
        }

        .round-info {
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .table-container {
            position: relative;
            width: min(90vw, 500px);
            height: min(90vw, 500px);
            margin: 0 auto 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255,255,255,0.2);
        }

        .table-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: clamp(120px, 35%, 200px);
            height: clamp(120px, 35%, 200px);
            background: linear-gradient(45deg, #8B0000, #DC143C);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 4px solid rgba(255,255,255,0.3);
        }

        .wine-bottle {
            font-size: clamp(1.5rem, 5vw, 3rem);
            margin-bottom: 5px;
        }

        .table-center div {
            font-size: clamp(0.7rem, 2.5vw, 1rem);
        }

        .current-wine {
            font-weight: bold;
            font-size: clamp(0.6rem, 2vw, 1.1rem) !important;
            margin-top: 5px;
        }

        .participant {
            position: absolute;
            width: clamp(80px, 20vw, 120px);
            height: clamp(60px, 15vw, 80px);
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .participant:hover {
            transform: translate(-50%, -50%) scale(1.05);
            border-color: #667eea;
        }

        .participant.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translate(-50%, -50%) scale(1.1);
        }

        .participant-name {
            font-size: clamp(0.7rem, 2vw, 0.9rem);
            margin-bottom: 5px;
            text-align: center;
        }

        .participant-score {
            font-size: clamp(0.9rem, 3vw, 1.2rem);
            color: #8B0000;
        }

        .participant.active .participant-score {
            color: #FFD700;
        }

        .controls {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            font-weight: bold;
            cursor: pointer;
            margin: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            min-width: 120px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .rating-section {
            display: none;
            margin-top: 20px;
        }

        .rating-section.active {
            display: block;
        }

        .rating-controls {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .rating-input {
            width: 80px;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            text-align: center;
            font-size: 1.1rem;
        }

        .rating-input:focus {
            border-color: #667eea;
            outline: none;
        }

        .leaderboard {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .leaderboard h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
            font-size: clamp(1.1rem, 3vw, 1.3rem);
        }

        .wine-list {
            display: grid;
            gap: 10px;
        }

        .wine-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255,255,255,0.7);
            border-radius: 10px;
            border-left: 5px solid #667eea;
            font-size: clamp(0.8rem, 2.5vw, 1rem);
        }

        .wine-item.winner {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border-left-color: #8B0000;
            font-weight: bold;
        }

        .final-results {
            display: none;
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(0,0,0,0.2);
        }

        .final-results.active {
            display: block;
        }

        .winner-announcement {
            font-size: clamp(1.3rem, 4vw, 2rem);
            color: #8B0000;
            margin-bottom: 20px;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #FFD700;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Media Queries para melhor responsividade */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .header h1 {
                padding-top: 40px;
            }
            
            .wine-showcase {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .controls {
                padding: 15px;
            }
            
            .rating-controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
                max-width: 250px;
            }
            
            .participant {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .table-container {
                width: 95vw;
                height: 95vw;
            }
            
            .participant {
                width: 70px;
                height: 50px;
            }
            
            .participant-name {
                font-size: 0.6rem;
            }
            
            .participant-score {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç∑ Prova de Vinhos üç∑</h1>
            <p>Uma experi√™ncia √∫nica de vinhos portugueses</p>
        </div>

        <div class="wine-showcase">
            <div class="wine-image-card">
                <div class="wine-image wine-elegant"></div>
                <h3>Vinhos Premium</h3>
                <p>Sele√ß√£o exclusiva de tintos portugueses</p>
            </div>
            <div class="wine-image-card">
                <div class="wine-image povoa-image"></div>
                <h3>P√≥voa de Varzim</h3>
                <p>Tradi√ß√£o e qualidade desde sempre</p>
            </div>
        </div>

        <div class="round-info">
            <h2 id="roundTitle">Prepara√ß√£o da Prova</h2>
            <p id="roundDescription">Clique em "Sortear Vinho" para come√ßar a primeira ronda!</p>
        </div>

        <div class="table-container">
            <div class="table-center">
                <div class="wine-bottle">üç∑</div>
                <div>Mesa dos</div>
                <div>Vinhos</div>
                <div class="current-wine" id="currentWine">---</div>
            </div>
            
            <div class="participant" id="participant-0">
                <div class="participant-name">Ruben Jesus</div>
                <div class="participant-score">0</div>
            </div>
            <div class="participant" id="participant-1">
                <div class="participant-name">David Moreira</div>
                <div class="participant-score">0</div>
            </div>
            <div class="participant" id="participant-2">
                <div class="participant-name">Jo√£o Esteves</div>
                <div class="participant-score">0</div>
            </div>
            <div class="participant" id="participant-3">
                <div class="participant-name">Miguel Oliveira</div>
                <div class="participant-score">0</div>
            </div>
            <div class="participant" id="participant-4">
                <div class="participant-name">Miguel Gil</div>
                <div class="participant-score">0</div>
            </div>
        </div>

        <div class="controls">
            <button class="btn" id="drawWineBtn" onclick="drawWine()">üé≤ Sortear Vinho</button>
            
            <div class="rating-section" id="ratingSection">
                <h3>Avaliem o vinho atual:</h3>
                <div class="rating-controls">
                    <label>Nota (1-10):</label>
                    <input type="number" class="rating-input" id="ratingInput" min="1" max="10" placeholder="1-10">
                    <button class="btn" onclick="submitRating()">‚úÖ Confirmar Nota</button>
                </div>
                <p id="ratingsProgress">Avalia√ß√µes: 0/5</p>
            </div>
            
            <button class="btn" id="nextRoundBtn" onclick="nextRound()" style="display: none;">‚û°Ô∏è Pr√≥xima Ronda</button>
        </div>

        <div class="leaderboard">
            <h3>üèÜ Classifica√ß√£o dos Vinhos</h3>
            <div class="wine-list" id="wineList">
                <p style="text-align: center; color: #666;">Ainda n√£o h√° vinhos avaliados</p>
            </div>
        </div>

        <div class="final-results" id="finalResults">
            <div class="winner-announcement">üéâ VINHO VENCEDOR üéâ</div>
            <div id="winnerName" style="font-size: 1.5rem; margin-bottom: 20px;"></div>
            <div id="winnerScore" style="font-size: 1.2rem; color: #667eea;"></div>
            <button class="btn" onclick="resetTournament()" style="margin-top: 20px;">üîÑ Nova Prova</button>
        </div>
    </div>

    <script>
        const participants = [
            'Ruben Jesus', 'David Moreira', 'Jo√£o Esteves', 'Miguel Oliveira', 'Miguel Gil'
        ];

        const wineNames = [
            'Quinta do Crasto Reserva Tinto 2020',
            'Quinta do Vallado Touriga Nacional 2019',
            'Quinta do Noval Cedro do Noval 2021',
            'Quinta da Romaneira Reserva 2020',
            'Quinta do Vesuvio Vintage 2018',
            'Herdade do Rocim Mariana Tinto 2019',
            'Quinta do Monte d\'Oiro Syrah 2020',
            'Quinta de la Rosa Reserva 2019',
            'Quinta do Portal Grande Reserva 2018',
            'Quinta do Seixo Reserva Tinto 2020'
        ];

        let currentRound = 0;
        let currentRatings = [];
        let wineScores = [];
        let currentWineIndex = -1;
        let availableWines = [...wineNames];

        // Posicionar participantes em c√≠rculo
        function positionParticipants() {
            const container = document.querySelector('.table-container');
            const containerRect = container.getBoundingClientRect();
            const centerX = containerRect.width / 2;
            const centerY = containerRect.height / 2;
            const radius = Math.min(centerX, centerY) * 0.7;

            participants.forEach((name, index) => {
                const angle = (index * 2 * Math.PI) / participants.length - Math.PI / 2;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                const participant = document.getElementById(`participant-${index}`);
                participant.style.left = `${x}px`;
                participant.style.top = `${y}px`;
            });
        }

        function drawWine() {
            if (availableWines.length === 0) return;
            
            const randomIndex = Math.floor(Math.random() * availableWines.length);
            const selectedWine = availableWines.splice(randomIndex, 1)[0];
            
            currentWineIndex = wineNames.indexOf(selectedWine);
            currentRound++;
            currentRatings = [];
            
            document.getElementById('currentWine').textContent = selectedWine;
            document.getElementById('roundTitle').textContent = `Ronda ${currentRound} de 3`;
            document.getElementById('roundDescription').textContent = `Vinho atual: ${selectedWine}`;
            
            document.getElementById('drawWineBtn').style.display = 'none';
            document.getElementById('ratingSection').classList.add('active');
            document.getElementById('ratingsProgress').textContent = 'Avalia√ß√µes: 0/5';
            document.getElementById('ratingInput').value = '';
            
            // Destacar primeiro participante
            updateActiveParticipant();
        }

        function updateActiveParticipant() {
            participants.forEach((_, index) => {
                const participant = document.getElementById(`participant-${index}`);
                if (index === currentRatings.length) {
                    participant.classList.add('active');
                } else {
                    participant.classList.remove('active');
                }
            });
        }

        function submitRating() {
            const rating = parseInt(document.getElementById('ratingInput').value);
            
            if (!rating || rating < 1 || rating > 10) {
                alert('Por favor, insira uma nota entre 1 e 10!');
                return;
            }
            
            currentRatings.push(rating);
            document.getElementById('ratingInput').value = '';
            document.getElementById('ratingsProgress').textContent = `Avalia√ß√µes: ${currentRatings.length}/5`;
            
            if (currentRatings.length < 5) {
                updateActiveParticipant();
            } else {
                finishRound();
            }
        }

        function finishRound() {
            // Calcular m√©dia do vinho atual
            const average = currentRatings.reduce((a, b) => a + b, 0) / currentRatings.length;
            
            wineScores.push({
                name: wineNames[currentWineIndex],
                score: average,
                round: currentRound
            });
            
            // Limpar participantes ativos
            participants.forEach((_, index) => {
                document.getElementById(`participant-${index}`).classList.remove('active');
            });
            
            document.getElementById('ratingSection').classList.remove('active');
            
            if (currentRound < 3) {
                document.getElementById('drawWineBtn').style.display = 'inline-block';
                document.getElementById('drawWineBtn').textContent = 'üé≤ Sortear Pr√≥ximo Vinho';
            } else {
                showFinalResults();
            }
            
            updateLeaderboard();
        }

        function updateLeaderboard() {
            const wineList = document.getElementById('wineList');
            const sortedWines = [...wineScores].sort((a, b) => b.score - a.score);
            
            wineList.innerHTML = sortedWines.map((wine, index) => `
                <div class="wine-item ${index === 0 ? 'winner' : ''}">
                    <span>${wine.name}</span>
                    <span>${wine.score.toFixed(1)} ‚≠ê</span>
                </div>
            `).join('');
        }

        function showFinalResults() {
            // For√ßar o vencedor como Quinta da Leda 2022
            const winnerWine = {
                name: 'Quinta da Leda 2022',
                region: 'Douro Superior',
                grape: 'Touriga Nacional, Touriga Franca, Tinta Roriz',
                alcohol: '14.5%',
                characteristics: [
                    'üç∑ Cor rubi intensa com reflexos granada',
                    'üçÉ Aroma complexo de frutos vermelhos maduros',
                    'üå∞ Notas de especiarias e madeira tostada',
                    'üçá Taninos elegantes e bem estruturados',
                    '‚è∞ Final persistente e harmonioso'
                ]
            };
            
            document.getElementById('winnerName').innerHTML = `
                <div style="font-size: clamp(1.3rem, 4vw, 2rem); color: #8B0000; margin-bottom: 15px;">
                    ${winnerWine.name}
                </div>
                <div style="font-size: clamp(1rem, 3vw, 1.2rem); color: #555; margin-bottom: 20px;">
                    ${winnerWine.region} | ${winnerWine.grape}
                </div>
            `;
            
            document.getElementById('winnerScore').innerHTML = `
                <div style="text-align: left; max-width: 500px; margin: 0 auto;">
                    <h4 style="color: #8B0000; margin-bottom: 15px; font-size: clamp(1rem, 3vw, 1.2rem);">üèÜ Caracter√≠sticas do Vinho Vencedor:</h4>
                    ${winnerWine.characteristics.map(char => `<p style="margin: 8px 0; font-size: clamp(0.9rem, 2.5vw, 1rem);">${char}</p>`).join('')}
                    <p style="margin-top: 15px; font-weight: bold; color: #667eea; font-size: clamp(0.9rem, 2.5vw, 1rem);">Teor alco√≥lico: ${winnerWine.alcohol}</p>
                </div>
            `;
            
            document.getElementById('finalResults').classList.add('active');
            
            // Efeito de confete
            createConfetti();
        }

        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = ['#FFD700', '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4'][Math.floor(Math.random() * 5)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 100);
            }
        }

        function resetTournament() {
            currentRound = 0;
            currentRatings = [];
            wineScores = [];
            currentWineIndex = -1;
            availableWines = [...wineNames];
            
            document.getElementById('currentWine').textContent = '---';
            document.getElementById('roundTitle').textContent = 'Prepara√ß√£o da Prova';
            document.getElementById('roundDescription').textContent = 'Clique em "Sortear Vinho" para come√ßar a primeira ronda!';
            document.getElementById('drawWineBtn').textContent = 'üé≤ Sortear Vinho';
            document.getElementById('drawWineBtn').style.display = 'inline-block';
            document.getElementById('ratingSection').classList.remove('active');
            document.getElementById('finalResults').classList.remove('active');
            
            participants.forEach((_, index) => {
                document.getElementById(`participant-${index}`).classList.remove('active');
            });
            
            document.getElementById('wineList').innerHTML = '<p style="text-align: center; color: #666;">Ainda n√£o h√° vinhos avaliados</p>';
        }

        // Permitir Enter no input de avalia√ß√£o
        document.getElementById('ratingInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                submitRating();
            }
        });

        // Inicializar e reposicionar em redimensionamento
        function initializeLayout() {
            positionParticipants();
        }

        window.addEventListener('resize', initializeLayout);
        window.addEventListener('load', initializeLayout);
        
        // Inicializar posi√ß√µes
        initializeLayout();
    </script>
</body>
</html>
